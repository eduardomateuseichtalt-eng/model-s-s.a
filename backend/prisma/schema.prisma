generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Model {
  id         String   @id @default(uuid())
  name       String
  email      String   @unique
  password   String
  age        Int
  city       String?
  bio        String?
  avatarUrl  String?
  coverUrl   String?
  instagram  String?
  whatsapp   String?
  height     Int?
  weight     Int?
  bust       Int?
  waist      Int?
  hips       Int?
  priceHour  Int?
  isVerified Boolean  @default(false)
  createdAt  DateTime @default(now())
  shots      Shot[]
}

model User {
  id           String     @id @default(uuid())
  email        String     @unique
  passwordHash String
  displayName  String?
  role         String     @default("USER")
  createdAt    DateTime   @default(now())
  shotLikes    ShotLike[]
}

model Shot {
  id        String     @id @default(uuid())
  modelId   String
  videoUrl  String
  posterUrl String?
  isActive  Boolean    @default(true)
  createdAt DateTime   @default(now())
  model     Model      @relation(fields: [modelId], references: [id])
  likes     ShotLike[]

  @@unique([modelId, videoUrl])
}

model ShotLike {
  id        String   @id @default(uuid())
  shotId    String
  userId    String
  createdAt DateTime @default(now())
  shot      Shot     @relation(fields: [shotId], references: [id])
  user      User     @relation(fields: [userId], references: [id])

  @@unique([shotId, userId])
}
